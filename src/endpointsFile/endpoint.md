# **API REST - Plateforme de Location Immobili√®re**

## ** Sommaire**

1. [Authentification et utilisateurs](#1-authentification-et-utilisateurs)
2. [Cat√©gories et propri√©t√©s](#2-cat√©gories-et-propri√©t√©s)
3. [Recherche et d√©couverte](#3-recherche-et-d√©couverte)
4. [Favoris et recherches sauv√©es](#4-favoris-et-recherches-sauv√©es)
5. [Communication de base](#5-communication-de-base)
6. [R√©servations de base](#6-r√©servations-de-base)
7. [Paiements sp√©cifiques](#7-paiements-sp√©cifiques)
8. [√âvaluations et avis](#8-√©valuations-et-avis)
9. [Notifications](#9-notifications)
10. [Analytics propri√©taires](#10-analytics-propri√©taires)
11. [Administration avanc√©e](#11-administration-avanc√©e)
12. [Services avanc√©s](#12-services-avanc√©s)
13. [IA et fonctionnalit√©s intelligentes](#13-ia-et-fonctionnalit√©s-intelligentes)
14. [API publique et webhooks](#14-api-publique-et-webhooks)
15. [Recherche et filtres avanc√©s](#15-recherche-et-filtres-avanc√©s)
16. [Mobile et fonctionnalit√©s natives](#16-mobile-et-fonctionnalit√©s-natives)
17. [Support et assistance](#17-support-et-assistance)
18. [Exports et rapports](#18-exports-et-rapports)
19. [Gestion des m√©dias avanc√©e](#19-gestion-des-m√©dias-avanc√©e)
20. [S√©curit√© et audit](#20-s√©curit√©-et-audit)
21. [Priorit√©s de d√©veloppement](#priorit√©s-de-d√©veloppement-d√©taill√©es)
22. [Structure backend recommand√©e](#üèóÔ∏è-structure-backend-recommand√©e)

---

## **1. AUTHENTIFICATION ET UTILISATEURS**

### **1.1 Authentification de base**

| M√©thode | Endpoint                    | Description                |
| ------- | --------------------------- | -------------------------- |
| POST    | `/api/auth/register`        | Inscription utilisateur    |
| POST    | `/api/auth/login`           | Connexion                  |
| POST    | `/api/auth/logout`          | D√©connexion                |
| POST    | `/api/auth/refresh`         | Refresh token              |
| POST    | `/api/auth/forgot-password` | Mot de passe oubli√©        |
| POST    | `/api/auth/reset-password`  | R√©initialiser mot de passe |
| POST    | `/api/auth/verify-email`    | V√©rification email         |
| POST    | `/api/auth/verify-phone`    | V√©rification t√©l√©phone     |

### **1.2 Profils utilisateurs**

| M√©thode | Endpoint                     | Description                 |
| ------- | ---------------------------- | --------------------------- |
| GET     | `/api/users/profile`         | Profil utilisateur connect√© |
| PUT     | `/api/users/profile`         | Mise √† jour profil          |
| POST    | `/api/users/avatar`          | Upload avatar               |
| GET     | `/api/users/:id`             | Profil public utilisateur   |
| POST    | `/api/users/change-password` | Changer mot de passe        |

### **1.3 R√¥les et v√©rifications**

| M√©thode | Endpoint                         | Description                |
| ------- | -------------------------------- | -------------------------- |
| GET     | `/api/users/roles`               | R√¥les utilisateur connect√© |
| POST    | `/api/users/roles`               | Demander un nouveau r√¥le   |
| POST    | `/api/users/verify-documents`    | Soumettre documents        |
| GET     | `/api/users/verification-status` | Statut v√©rification        |

---

## **2. CAT√âGORIES ET PROPRI√âT√âS**

### **2.1 Cat√©gories**

| M√©thode | Endpoint              | Description              |
| ------- | --------------------- | ------------------------ |
| GET     | `/api/categories`     | Liste cat√©gories actives |
| GET     | `/api/categories/:id` | D√©tails cat√©gorie        |

### **2.2 Gestion des propri√©t√©s**

| M√©thode | Endpoint                        | Description                     |
| ------- | ------------------------------- | ------------------------------- |
| POST    | `/api/properties`               | Cr√©er propri√©t√©                 |
| GET     | `/api/properties/my-properties` | Mes propri√©t√©s                  |
| GET     | `/api/properties/:id`           | D√©tails propri√©t√©               |
| PUT     | `/api/properties/:id`           | Modifier propri√©t√©              |
| DELETE  | `/api/properties/:id`           | Supprimer propri√©t√©             |
| PUT     | `/api/properties/:id/status`    | Changer statut (draft ‚Üí active) |

### **2.3 M√©dias propri√©t√©s**

| M√©thode | Endpoint                                     | Description              |
| ------- | -------------------------------------------- | ------------------------ |
| POST    | `/api/properties/:id/media`                  | Upload photos/vid√©os     |
| PUT     | `/api/properties/:id/media/:mediaId`         | Modifier m√©dia           |
| DELETE  | `/api/properties/:id/media/:mediaId`         | Supprimer m√©dia          |
| PUT     | `/api/properties/:id/media/:mediaId/primary` | D√©finir photo principale |

### **2.4 Tarification**

| M√©thode | Endpoint                                 | Description          |
| ------- | ---------------------------------------- | -------------------- |
| POST    | `/api/properties/:id/pricing`            | D√©finir tarification |
| PUT     | `/api/properties/:id/pricing/:pricingId` | Modifier prix        |
| GET     | `/api/properties/:id/pricing`            | Obtenir tarification |

### **2.5 Disponibilit√©s**

| M√©thode | Endpoint                                    | Description                    |
| ------- | ------------------------------------------- | ------------------------------ |
| POST    | `/api/properties/:id/availability`          | D√©finir disponibilit√©s         |
| PUT     | `/api/properties/:id/availability/:availId` | Modifier disponibilit√©         |
| DELETE  | `/api/properties/:id/availability/:availId` | Supprimer p√©riode              |
| GET     | `/api/properties/:id/availability`          | Voir calendrier disponibilit√©s |

---

## **3. RECHERCHE ET D√âCOUVERTE**

| M√©thode | Endpoint                   | Description                |
| ------- | -------------------------- | -------------------------- |
| GET     | `/api/properties/search`   | Recherche avec filtres     |
| GET     | `/api/properties/featured` | Propri√©t√©s mises en avant  |
| GET     | `/api/properties/recent`   | Propri√©t√©s r√©centes        |
| GET     | `/api/properties/popular`  | Propri√©t√©s populaires      |
| GET     | `/api/properties/:slug`    | D√©tails propri√©t√© publique |
| POST    | `/api/properties/:id/view` | Compteur de vues           |

---

## **4. FAVORIS ET RECHERCHES SAUV√âES**

| M√©thode | Endpoint                     | Description                 |
| ------- | ---------------------------- | --------------------------- |
| GET     | `/api/favorites`             | Mes favoris                 |
| POST    | `/api/favorites/:propertyId` | Ajouter aux favoris         |
| DELETE  | `/api/favorites/:propertyId` | Retirer des favoris         |
| GET     | `/api/saved-searches`        | Mes recherches sauvegard√©es |

---

## **5. COMMUNICATION**

| M√©thode | Endpoint                          | Description             |
| ------- | --------------------------------- | ----------------------- |
| GET     | `/api/conversations`              | Liste des conversations |
| POST    | `/api/conversations`              | Cr√©er conversation      |
| GET     | `/api/conversations/:id`          | D√©tails conversation    |
| POST    | `/api/conversations/:id/messages` | Envoyer message         |

---

## **6. R√âSERVATIONS DE BASE**

| M√©thode | Endpoint                            | Description              |
| ------- | ----------------------------------- | ------------------------ |
| POST    | `/api/booking-requests`             | Cr√©er demande            |
| GET     | `/api/booking-requests`             | Mes demandes             |
| PUT     | `/api/booking-requests/:id/respond` | R√©pondre (accept/reject) |
| PUT     | `/api/booking-requests/:id/cancel`  | Annuler demande          |

---

## **7. PAIEMENTS**

| M√©thode | Endpoint                     | Description           |
| ------- | ---------------------------- | --------------------- |
| POST    | `/api/payments/rent`         | Paiement loyer        |
| POST    | `/api/payments/deposit`      | Paiement caution      |
| POST    | `/api/payments/mobile-money` | Paiement Mobile Money |
| GET     | `/api/payments/:id/status`   | Statut paiement       |
| GET     | `/api/payments/:id/receipt`  | Re√ßu paiement         |

---

## **8. √âVALUATIONS ET AVIS**

| M√©thode | Endpoint                            | Description      |
| ------- | ----------------------------------- | ---------------- |
| GET     | `/api/reviews/property/:propertyId` | Avis propri√©t√©   |
| GET     | `/api/reviews/user/:userId`         | Avis utilisateur |
| POST    | `/api/reviews`                      | Cr√©er avis       |
| PUT     | `/api/reviews/:id`                  | Modifier avis    |
| DELETE  | `/api/reviews/:id`                  | Supprimer avis   |

---

## **9. NOTIFICATIONS**

| M√©thode | Endpoint                          | Description               |
| ------- | --------------------------------- | ------------------------- |
| GET     | `/api/notifications`              | Mes notifications         |
| PUT     | `/api/notifications/read-all`     | Marquer toutes comme lues |
| GET     | `/api/notifications/unread-count` | Compteur non lues         |
| GET     | `/api/notifications/preferences`  | Pr√©f√©rences notifications |

---

## **10. ANALYTICS PROPRI√âTAIRES**

| M√©thode | Endpoint                   | Description          |
| ------- | -------------------------- | -------------------- |
| GET     | `/api/analytics/dashboard` | Dashboard principal  |
| GET     | `/api/analytics/revenue`   | Statistiques revenus |
| GET     | `/api/reports/monthly`     | Rapport mensuel      |
| GET     | `/api/reports/tax`         | Rapport fiscal       |

---

## **11. ADMINISTRATION**

| M√©thode | Endpoint                  | Description           |
| ------- | ------------------------- | --------------------- |
| GET     | `/api/admin/users`        | Liste utilisateurs    |
| GET     | `/api/admin/properties`   | Toutes les propri√©t√©s |
| GET     | `/api/admin/transactions` | Transactions          |
| GET     | `/api/admin/settings`     | Param√®tres syst√®me    |
| GET     | `/api/admin/stats`        | Statistiques globales |

---

## **12. SERVICES AVANC√âS**

| M√©thode | Endpoint                   | Description |
| ------- | -------------------------- | ----------- |
| GET     | `/api/services/movers`     | D√©m√©nageurs |
| GET     | `/api/services/cleaning`   | Nettoyage   |
| GET     | `/api/services/insurance`  | Assurances  |
| POST    | `/api/inspections/request` | Inspection  |
| POST    | `/api/maintenance/request` | Maintenance |

---

## **13. IA ET ANALYSE**

| M√©thode | Endpoint                          | Description           |
| ------- | --------------------------------- | --------------------- |
| GET     | `/api/ai/recommendations/:userId` | Recommandations IA    |
| POST    | `/api/ai/price-suggestion`        | Suggestion de prix    |
| POST    | `/api/ai/fraud-check`             | V√©rification fraude   |
| POST    | `/api/ai/description-enhance`     | Am√©liorer description |

---

## **14. API PUBLIQUE & WEBHOOKS**

| M√©thode | Endpoint                        | Description              |
| ------- | ------------------------------- | ------------------------ |
| GET     | `/api/public/properties`        | Donn√©es publiques        |
| POST    | `/api/webhooks/payment-success` | Callback paiement r√©ussi |
| POST    | `/api/integrations/maps`        | Int√©gration cartes       |

---

## **15. SUPPORT**

| M√©thode | Endpoint                | Description          |
| ------- | ----------------------- | -------------------- |
| POST    | `/api/support/tickets`  | Cr√©er ticket support |
| GET     | `/api/support/faq`      | Foire aux questions  |
| POST    | `/api/support/feedback` | Envoyer feedback     |

---

## **üìä PRIORIT√âS DE D√âVELOPPEMENT D√âTAILL√âES**

### **üî• Priorit√© 1 - MVP Essentiel (Semaines 1-8)**

* Authentification compl√®te
* Gestion propri√©t√©s de base
* Recherche simple
* Communication basique
* R√©servations simples

**Technologies :**

* Node.js + Express + TypeScript
* PostgreSQL
* JWT Auth
* Multer + Cloud Storage
* SendGrid (ou √©quivalent)

---

### **‚≠ê Priorit√© 2 - Fonctionnalit√©s Business (Semaines 9-16)**

* Paiements Mobile Money
* Contrats num√©riques
* Syst√®me d‚Äôavis
* Dashboard analytics
* Notifications push

**Technologies :**

* SDK Mobile Money
* jsPDF
* Firebase Cloud Messaging
* Mixpanel
* node-cron

---

### **üöÄ Priorit√© 3 - Diff√©renciation (Semaines 17-24)**

* Panel Admin complet
* Services partenaires
* Recommandations IA
* API publique
* Support client
* Audit et s√©curit√©

**Technologies :**

* React Admin
* TensorFlow.js / OpenAI
* Mapbox GL JS
* Elasticsearch
* Redis + Bull

---

## **üèóÔ∏è STRUCTURE BACKEND RECOMMAND√âE**

```
src/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ database.ts
‚îÇ   ‚îú‚îÄ‚îÄ redis.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts
‚îÇ   ‚îú‚îÄ‚îÄ upload.ts
‚îÇ   ‚îî‚îÄ‚îÄ constants.ts
‚îÇ
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ users.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ properties.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ search.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ bookings.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ payments.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ messages.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ reviews.controller.ts
‚îÇ   ‚îú‚îÄ‚îÄ notifications.controller.ts
‚îÇ   ‚îî‚îÄ‚îÄ admin.controller.ts
‚îÇ
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.ts
‚îÇ   ‚îú‚îÄ‚îÄ roles.middleware.ts
‚îÇ   ‚îú‚îÄ‚îÄ validation.middleware.ts
‚îÇ   ‚îú‚îÄ‚îÄ ratelimit.middleware.ts
‚îÇ   ‚îú‚îÄ‚îÄ upload.middleware.ts
‚îÇ   ‚îî‚îÄ‚îÄ error.middleware.ts
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ User.ts
‚îÇ   ‚îú‚îÄ‚îÄ Property.ts
‚îÇ   ‚îú‚îÄ‚îÄ Booking.ts
‚îÇ   ‚îú‚îÄ‚îÄ Transaction.ts
‚îÇ   ‚îú‚îÄ‚îÄ Message.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ email.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ sms.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ payment.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ upload.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ notification.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ search.service.ts
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ database.ts
‚îÇ   ‚îú‚îÄ‚îÄ encryption.ts
‚îÇ   ‚îú‚îÄ‚îÄ validation.ts
‚îÇ   ‚îú‚îÄ‚îÄ helpers.ts
‚îÇ   ‚îî‚îÄ‚îÄ types.ts
‚îÇ
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ users.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ properties.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ search.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ bookings.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ payments.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ messages.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ reviews.routes.ts
‚îÇ   ‚îú‚îÄ‚îÄ admin.routes.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 001_create_users.sql
‚îÇ   ‚îú‚îÄ‚îÄ 002_create_properties.sql
‚îÇ   ‚îú‚îÄ‚îÄ 003_create_bookings.sql
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ seeds/
‚îÇ   ‚îú‚îÄ‚îÄ categories.seed.ts
‚îÇ   ‚îú‚îÄ‚îÄ admin.seed.ts
‚îÇ   ‚îî‚îÄ‚îÄ settings.seed.ts
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ auth.test.ts
‚îÇ   ‚îú‚îÄ‚îÄ properties.test.ts
‚îÇ   ‚îú‚îÄ‚îÄ bookings.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ api.md
‚îÇ   ‚îú‚îÄ‚îÄ database.md
‚îÇ   ‚îî‚îÄ‚îÄ deployment.md
‚îÇ
‚îú‚îÄ‚îÄ app.ts
‚îú‚îÄ‚îÄ server.ts
‚îî‚îÄ‚îÄ package.json
```

---